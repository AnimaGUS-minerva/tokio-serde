language: rust
sudo: false

rust:
  - stable

before_script:
  - pip install 'travis-cargo<0.2' --user && export PATH=$HOME/.local/bin:$PATH

script:
  - cargo build
  - cargo test
  - cargo doc --no-deps

after_success:
  - travis-cargo --only nightly doc-upload

env:
  global:
    - secure: "VPwwPGDghBE5bCUkWa6vPtMUmKCP6lqmF3jiCUrd69FAI7yCPz9DiStEfuB1+UVhh0VaOKNsw9P5OIfkK8cwKc3flfgsiU18z2qZyUqUNlBQTDAAnSsck0wyzGReycMuyjhlbGZN8FzzxQ3fmUH5JUa2IJnl5z+xUEpGWJPAaNUgsUJ9inb0Mm86IVZ2zYdQQOA+4KL8lyeLz9OQr9qHwFsMjUXSXz/EmaFprjradoPdPii9QYCJuaG1S92xVSVxx4losICq3+GN6kZvDuT1ebB1Dtel01M33ibNpLKp5GPTS+CmrpyuKMVHVmyUG1pKiQr4h57Mj9bT63sb7R7oWul18P8EKYIF8alUPza+tLg/P3kyibrfzuORoabjsD+npiu/wbsisRqPswRb0QHt8brbE1MmwgRaWTtNzYpRNKIhGgF/F0Dh9m8p5zFeMw0eBxrEGfHD44rg3IDKDKhwSb8ql5GzL2cXAHDLZ+ilJ7LbA94yKfK1aJIVybX00YelUJ9etaVIbxjcRitJElLDWDjUKoc+qwj8SKIFz5CrEBXk5Ri28jdE/82IKm7ydAGGqGaAuLhO3mYE/BdSqtZcVQ3hS+qXD6ODrkxe1jdalSFENE5XL3FzpKwyPTXBiEeO8TmNpoVJE59MHudLDkKvzqKeV+KAphvlmZHtyuvARaM="

notifications:
  email:
    on_success: never
